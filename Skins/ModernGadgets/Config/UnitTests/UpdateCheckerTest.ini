[Rainmeter]
Update=1000
MiddleMouseDownAction=[!Refresh]

[Metadata]
Name=UpdateCheckerUnitTest
Author=raiguard
Information=Unit test for the ModernGadgets update checker
Version=1.0.0

[Variables]
version=1.0.0-alpha.1
dRemoteVersion=1.0.0
dRemoteDevVersion=1.0.0-alpha.2.555
notifyUpdates=1
devUpdates=0
releaseVer=1.2.2

[StyleString]
FontFace=Roboto
FontSize=10
FontColor=255,255,255,255
Antialias=1
X=5
Y=5R

[MeasureUpdateCheckerScript]
Measure=Script
ScriptFile=UpdateChecker.lua
FilePath=#CURRENTPATH#DownloadFile\\Test.inc
UpToDateAction=[!SetOption UpdateCheckResultString Text "Result: Up-to-date"][!UpdateMeter UpdateCheckResultString][!Redraw]
UpdateAvailableAction=[!SetOption UpdateCheckResultString Text "Result: Update available"][!UpdateMeter UpdateCheckResultString][!Redraw]
ParsingErrorAction=[!Log "Could not parse one or both version strings" "Error"][!SetOption UpdateCheckResultString Text "Result: Error"][!UpdateMeter UpdateCheckResultString][!Redraw]

[MeasureUpdateWebParser]
Measure=Plugin
Plugin=WebParser
URL=https://raw.githubusercontent.com/raiguard/ModernGadgets/master/RELEASE
Download=1
DownloadFile='Release.inc'
OnConnectErrorAction=[!Log "Could not connect to update server" "Error"]
FinishAction=[!CommandMeasure MeasureUpdateCheckerScript "CheckForUpdate(#devUpdates#, '#version#')"]

[Background]
Meter=Image
SolidColor=0,0,0,255
X=0
Y=0
W=250
H=230

[TitleString]
Meter=String
MeterStyle=StyleString
Y=5
Text="WebParser Unit Test"

[RemoteVersionStableString]
Meter=String
MeterStyle=StyleString
MeasureName=MeasureRemoteVersionStable
Text="Remote Stable: %1"
Group=Meters

[RemoteVersionDevString]
Meter=String
MeterStyle=StyleString
MeasureName=MeasureRemoteVersionDev
Text="Remote Dev: %1"
Group=Meters

[Divider]
Meter=Image
SolidColor=50,50,50,255
X=5
Y=5R
W=220
H=1

[TitleString2]
Meter=String
MeterStyle=StyleString
Text="Comparison Unit Test"

[NotifyUpdatesString]
Meter=String
MeterStyle=StyleString
Text="NotifyUpdates: #notifyUpdates#"

[DevUpdatesString]
Meter=String
MeterStyle=StyleString
Text="DevUpdates: #devUpdates#"

[CurrentVersionString]
Meter=String
MeterStyle=StyleString
Text="Comp. Local: #version#"

[ComparisonDebugRemoteString]
Meter=String
MeterStyle=StyleString
Text="Comp. Remote: #dRemoteVersion#"

[ComparisonDebugDevRemoteString]
Meter=String
MeterStyle=StyleString
Text="Comp. Dev Remote: #dRemoteDevVersion#"

[UpdateCheckResultString]
Meter=String
MeterStyle=StyleString
Text="Result:"
