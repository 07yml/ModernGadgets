[Rainmeter]
MiddleMouseDownAction=[!Refresh]
MouseOverAction=[!ShowMeterGroup ConfigButton][!UpdateMeterGroup ConfigButton][!ShowMeterGroup NetTotalsRefreshButtons1][!UpdateMeterGroup NetTotalsRefreshButtons1][!ShowMeterGroup SpeedtestButton1][!UpdateMeterGroup SpeedtestButton1][!UpdateMeterGroup Background][!Redraw]
MouseLeaveAction=[!HideMeterGroup ConfigButton][!UpdateMeterGroup ConfigButton][!HideMeterGroup NetTotalsRefreshButtons1][!UpdateMeterGroup NetTotalsRefreshButtons1][!HideMeterGroup SpeedtestButton1][!UpdateMeterGroup SpeedtestButton1][!UpdateMeterGroup Background][!Redraw]
Group=ModernGadgets | MgGlobalRefresh | MgImportRefresh | MgNetworkMeter
AccurateText=1

; Custom Context Menu
ContextTitle=Network Meter settings
ContextAction=[!ActivateConfig "ModernGadgets\NetworkMeter\Settings" "NetworkMeterSettings.ini"]
ContextTitle2=Global settings
ContextAction2=[!ActivateConfig "ModernGadgets\Settings\GlobalSettings" "GlobalSettings.ini"]
ContextTitle3=Gadget manager
ContextAction3=[!ActivateConfig "ModernGadgets\Settings\GadgetManager" "GadgetManager.ini"]

[Metadata]
Name=Network Meter
Author=raiguard
Information=A Rainmeter recreation of the Network Meter gadget, updated and enhanced to give it a "modern" feel.
License=Creative Commons Attribution-NonCommercial-ShareAlike 3.0
Version=1.5.1-rc.4

; ========= Variables and Styles =========

[Variables]
@includeStyleSheet=#@#StyleSheet.inc
@includeGlobalSettings=#@#Settings\GlobalSettings.inc
@includeNetworkSettings=#@#Settings\NetworkSettings.inc
@includeDynamicVars=#dynamicVarsPath#

maxBitsPerSec=0
maxBytesPerSec=0
textNetInOutPeakBits="0.0000 k"
textNetInOutPeakBytes="0.0000 k"

textNetInBits=""
textNetInBytes=""
textNetInSessionTotal=""
textNetInTotal=""
textNetOutBits=""
textNetOutBytes=""
textNetOutSessionTotal=""
textNetOutTotal=""

totalColumnX=(#columnX# - 2)
netInOutFontFace=#fontFaceCn#
adapterFound=0

netStatus=Disconnected

netIconTooltipIcon_Disconnected_-1=Error
netIconTooltipIcon_Wifi_1=Info
netIconTooltipIcon_Wifi_-1=Warning
netIconTooltipIcon_Ethernet_1=Info
netIconTooltipIcon_Ethernet_-1=Warning

netIconTooltipText_Disconnected_-1=Please check your network settings
netIconTooltipText_Wifi_1=[MeasureWifiSSID]#CRLF#[MeasureAdapterName]#CRLF#Signal Strength: [MeasureWifiQuality:]% ([MeasureWifiDbm:1] dBm)
netIconTooltipText_Wifi_-1=[MeasureWifiSSID]#CRLF#[MeasureAdapterName]#CRLF#Signal Strength: [MeasureWifiQuality:]% ([MeasureWifiDbm:1] dBm)#CRLF#LAN only - no internet connection.
netIconTooltipText_Ethernet_1=[MeasureAdapterName]
netIconTooltipText_Ethernet_-1=[MeasureAdapterName]#CRLF#LAN only - no internet connection.

[StylePeakIcon]
ImageName=#imgPath#barchart.png
ImageTint=#colorPeak#
X=#contentMargin#
Y=#rowSpacing#R
W=14
H=14
Padding=-1,0,-2,-2
Antialias=1

; ==================================================
;  MEASURES
; ==================================================

[MeasureFixedPrecisionFormatScript]
Measure=Script
ScriptFile=#scriptPath#FixedPrecisionFormat.lua

[MeasureLoadSkinScript]
Measure=Script
ScriptFile=#scriptPath#LoadSkin.lua

[MeasureConfigActive]
Measure=Plugin
Plugin=ConfigActive

; ----- Active Adapter -----

[MeasureAdapterName]
Measure=Plugin
Plugin=SysInfo
SysInfoType=ADAPTER_DESCRIPTION
SysInfoData=Best
DynamicVariables=1
OnChangeAction=[!Log "Network adapter changed, refreshing ActiveNet info" Notice][!SetOptionGroup ActiveNet Refresh "ya"][!UpdateMeasureGroup ActiveNet][!UpdateMeasure MeasureNetworkIcon]

[MeasureAdapterType]
Measure=Plugin
Plugin=ActiveNet
Type=NetAdapterType
Name=[MeasureAdapterName]
Group=ActiveNet
UpdateDivider=-1

[MeasureAdapterTypeId]
Measure=Plugin
Plugin=ActiveNet
Type=NetAdapterTypeID
Name=[MeasureAdapterName]
Group=ActiveNet
UpdateDivider=-1

[MeasureInterfaceName]
Measure=Plugin
Plugin=ActiveNet
Type=NetInterfaceName
Name=[MeasureAdapterName]
Group=ActiveNet
UpdateDivider=-1

[MeasureInterfaceId]
Measure=Plugin
Plugin=ActiveNet
Type=NetInterfaceID
Name=[MeasureAdapterName]
Group=ActiveNet
UpdateDivider=-1

; Beta testing!

[MeasureAdapterStatusEthernet]
Measure=Plugin
Plugin=ActiveNet
Type=NetStatus
Name=#interfaceEthernet#
Group=ActiveNet
UpdateDivider=-1

[MeasureAdapterStatusWireless]
Measure=Plugin
Plugin=ActiveNet
Type=NetStatus
Name=#interfaceWireless#
Group=ActiveNet
UpdateDivider=-1

[MeasureAdapterStatusOther]
Measure=Plugin
Plugin=ActiveNet
Type=NetStatus
Name=#interfaceOther#
Group=ActiveNet
UpdateDivider=-1

[MeasureAdapterStatusBest]
Measure=Plugin
Plugin=ActiveNet
Type=NetStatus
Name=[MeasureAdapterName]
Group=ActiveNet
UpdateDivider=-1

[MeasureAdapterStatusCalc]
Measure=Calc
; Formula=(MeasureAdapterStatusEthernet = 1 ? 1 : 0) + (MeasureAdapterStatusWireless = 1 ? 2 : 0) + (MeasureAdapterStatusOther = 1 ? 4 : 0)
IfCondition=(MeasureAdapterStatusEthernet = 1)
IfTrueAction=[!Log "Ethernet"]
IfCondition2=(MeasureAdapterStatusEthernet <> 1) && (MeasureAdapterStatusWireless = 1)
IfTrueAction2=[!Log "Wireless"]
IfCondition3=(MeasureAdapterStatusEthernet <> 1) && (MeasureAdapterStatusWireless <> 1) && (MeasureAdapterStatusOther = 1)
IfTrueAction3=[!Log "Other"]
IfCondition4=(MeasureAdapterStatusEthernet = 4) && (MeasureAdapterStatusWireless = 4) && (MeasureAdapterStatusOther = 4) && (MeasureAdapterStatusBest = 1)
IfTrueAction4=[!Log "Best"]
IfCondition5=(MeasureAdapterStatusEthernet <> 1) && (MeasureAdapterStatusWireless <> 1) && (MeasureAdapterStatusOther <> 1)
IfTrueAction5=[!Log "Best"]

; ----- Adapter Config -----

[MeasureCheckAdapterConfigEthernet]
Measure=String
String=#interfaceEthernet#
RegExpSubstitute=1
Substitute="^(.+)$":"enabled","^$":"disabled"
IfMatchMode=1
IfMatch="enabled"
IfMatchAction=[!EnableMeasureGroup "MeasureEthernet"][!SetVariable adapterFound 1]
IfNotMatchAction=[!DisableMeasureGroup "MeasureEthernet"]
UpdateDivider=-1
DynamicVariables=1
Group=AdapterConfig

[MeasureCheckAdapterConfigWireless]
Measure=String
String=#interfaceWireless#
RegExpSubstitute=1
Substitute="^(.+)$":"enabled","^$":"disabled"
IfMatchMode=1
IfMatch="enabled"
IfMatchAction=[!EnableMeasureGroup "MeasureWireless"][!SetVariable adapterFound 1]
IfNotMatchAction=[!DisableMeasureGroup "MeasureWireless"]
UpdateDivider=-1
DynamicVariables=1
Group=AdapterConfig

[MeasureCheckAdapterConfigOther]
Measure=String
String=#interfaceOther#
RegExpSubstitute=1
Substitute="^(.+)$":"enabled","^$":"disabled"
IfMatchMode=1
IfMatch="enabled"
IfMatchAction=[!EnableMeasureGroup "MeasureOther"][!SetVariable adapterFound 1]
IfNotMatchAction=[!DisableMeasureGroup "MeasureOther"]
UpdateDivider=-1
DynamicVariables=1
Group=AdapterConfig

[MeasureRunGetEthernetInterface]
Measure=Plugin
Plugin=RunCommand
Parameter="powershell -NonInteractive -Command "(Get-WmiObject -Class MSFT_NetAdapter -Filter 'InterfaceType = 6 and Virtual = False' -Namespace root\StandardCimv2 | Sort -Property InterfaceDescription | Select -First 1).InterfaceDescription""
OutputType=ANSI
State=Hide
Timeout=10000
Substitute="#CRLF#":""
IfMatch=^.+$
IfMatchAction=[!Log "Found ethernet adapter: [MeasureRunGetEthernetInterface]" Notice]
FinishAction=[!SetVariable InterfaceEthernet [MeasureRunGetEthernetInterface]][!WriteKeyValue Variables InterfaceEthernet "[MeasureRunGetEthernetInterface]" "#networkSettingsPath#"][!Log "Network interface autoconfig completed, restarting!" Notice][!RefreshGroup MgNetworkMeter]

[MeasureCheckAdapterConfig]
Measure=Calc
IfCondition=(#adapterFound# = 0) && (#autoAdapterConfig# = 1)
IfTrueAction=[!Log "No network adapter found, auto-configuring..." Notice][!SetOption MeterGadgetTitle Text "Configuring..."][!WriteKeyValue Variables autoAdapterConfig 0 "#networkSettingsPath#"][!CommandMeasure MeasureRunGetEthernetInterface "Run"]
IfCondition2=(#adapterFound# = 0) && (#autoAdapterConfig# = 0)
IfTrueAction2=[!Log "No network adapter found, monitoring active interface" Notice][!EnableMeasure MeasureGetActiveInterface][!UpdateMeasure MeasureGetActiveInterface]
DynamicVariables=1

[MeasureGetActiveInterface]
Measure=Calc
IfCondition=(MeasureAdapterType <> 71) && (#adapterFound# = 0)
IfTrueAction=[!SetVariable interfaceEthernet [MeasureAdapterName]][!SetVariable interfaceWireless ""][!SetVariable interfaceOther ""][!UpdateMeasureGroup AdapterConfig]
IfCondition2=(MeasureAdapterType = 71) && (#adapterFound# = 0)
IfTrueAction2=[!SetVariable interfaceEthernet ""][!SetVariable interfaceWireless [MeasureAdapterName]][!SetVariable interfaceOther ""][!UpdateMeasureGroup AdapterConfig]
DynamicVariables=1
Disabled=1

; ----- Network Traffic -----

@includeNetworkTraffic=Includes\#monitoringType#.inc

; ----- Ping -----

[MeasurePing]
Measure=Plugin
Plugin=PingPlugin
DestAddress=#pingUrl#
FinishAction=[!UpdateMeter PingString][!Redraw]

; ----- Max Transfer Speed -----

[MeasureNetInOutPeakBits]
Measure=Calc
Formula=Max(Max(MeasureNetInBitsCalc, MeasureNetOutBitsCalc), #maxBitsPerSec#)
IfConditionMode=1
IfCondition=(MeasureNetInOutPeakBits > #maxBitsPerSec#)
IfTrueAction=[!SetVariable maxBitsPerSec [MeasureNetInOutPeakBits:]][!SetVariable textNetInOutPeakBits [&MeasureFixedPrecisionFormatScript:FormatNumber([&MeasureNetInOutPeakBits],5,'1k')]]
DynamicVariables=1
Group=NetInOut

[MeasureNetInOutPeakBytes]
Measure=Calc
Formula=Max(Max(MeasureNetInBytes, MeasureNetOutBytes), #maxBytesPerSec#)
IfConditionMode=1
IfCondition=(MeasureNetInOutPeakBytes > #maxBytesPerSec#)
IfTrueAction=[!SetVariable maxBytesPerSec [MeasureNetInOutPeakBytes:]][!SetVariable textNetInOutPeakBytes [&MeasureFixedPrecisionFormatScript:FormatNumber([&MeasureNetInOutPeakBytes],5,'1k')]]
DynamicVariables=1
Group=NetInOut

; ----- IP Addresses -----

[MeasureInternalIp]
Measure=Plugin
Plugin=SysInfo
SysInfoType=IP_ADDRESS
SysInfoData=Best
DynamicVariables=1

[MeasureExternalIp]
Measure=WebParser
URL=https://api.ipify.org/
RegExp=(?siU)^(.*)$
StringIndex=1
ForceReload=1
FinishAction=[!SetVariable externalIp "[MeasureExternalIp]"][!WriteKeyValue "Variables" "externalIp" "[MeasureExternalIp]" "#dynamicVarsPath#"][!UpdateMeasure MeasureExternalIpString][!SetOption MeterExternalIpValueString_ Text "[MeasureExternalIp]"][!UpdateMeter MeterExternalIpValueString_][!Redraw][!DisableMeasure MeasureExternalIp]
Disabled=1

;
; NOTE:  Websites that can be used for obtaining your external IP address:
;
;   Url=https://secure.internode.on.net/webtools/showmyip?textonly=1  RegExp="(.*)"
;   Url=http://checkip.dyndns.org                                     RegExp="(?siU)Address: (.*)</body>"
;   Url=http://ipdetect.dnspark.com                                   RegExp="(?siU)Address: (.*)</body>"
;   Url=http://icanhazip.com                                          RegExp="(?siU)^(.*)$"                   Will display ipv6 IP if available
;   Url=https://ipv4.wtfismyip.com/text                               RegExp="(?siU)^(.*)$"                   Specifically gets ipv4 address
;   Url=https://api.ipify.org/                                        RegExp="(?siU)^(.*)$"
;
; NOTE:  Websites that can be used for displaying your location based on your external IP address:
;
;   http://addgadgets.com/ipaddress/index.php?ipaddr=[MeasureIPWeb]
;   http://whatismyipaddress.com/ip/[MeasureIPWeb]
;

; ----- NetMonitor Commands -----

[MeasureRunResetSessionStats]
Measure=Plugin
Plugin=RunCommand
Parameter=""#@#Addons\NetMonitor\ResetSessionStats.cmd""
OutputType=ANSI
State=Hide
Timeout=5000
FinishAction=[!Update][!Redraw]

[MeasureRunResetAllStats]
Measure=Plugin
Plugin=RunCommand
Parameter=""#@#Addons\NetMonitor\ResetAllStats.cmd""
OutputType=ANSI
State=Hide
Timeout=5000
FinishAction=[!Update][!Redraw]

; ----- Special Case -----

[MeasureConnectedLan]
Measure=Plugin
Plugin=SysInfo
SysInfoType=LAN_CONNECTIVITY
OnChangeAction=[!UpdateMeasure MeasureNetworkIcon][!Log "LAN State changed"]

[MeasureConnectedWan]
Measure=Plugin
Plugin=SysInfo
SysInfoType=INTERNET_CONNECTIVITY
OnChangeAction=[!UpdateMeasure MeasureNetworkIcon][!Log "WAN State changed"]

; WIFI
[MeasureWifiQuality]
Measure=Plugin
Plugin=WiFiStatus
WiFiInfoType=Quality

[MeasureWifiDbm]
Measure=Calc
Formula=(MeasureWifiQuality / 2) - 100

[MeasureWifiSSID]
Measure=Plugin
Plugin=WiFiStatus
WiFiInfoType=SSID

; Network Icon
[MeasureWifiIcon]
Measure=Calc
Formula=ceil(MeasureWifiQuality / 25)

[MeasureNetworkIcon]
Measure=Calc
Formula=MeasureConnectedLan + MeasureConnectedWan
IfCondition=(MeasureConnectedLan + MeasureConnectedWan) = -2
IfTrueAction=[!HideMeterGroup NetIcons][!SetVariable netStatus "Disconnected"][!ShowMeter MeterNetIconDisconnected][!UpdateMeterGroup NetIcons][!UpdateMeterGroup NetIconUtils][!Redraw]
IfCondition2=((MeasureConnectedLan + MeasureConnectedWan) = 0) && (MeasureAdapterType = 71)
IfTrueAction2=[!HideMeterGroup NetIcons][!SetVariable netStatus "Wifi"][!ShowMeterGroup NetIconsWifiLanOnly][!UpdateMeterGroup NetIcons][!UpdateMeterGroup NetIconUtils][!Redraw]
IfCondition3=((MeasureConnectedLan + MeasureConnectedWan) = 0) && (MeasureAdapterType = 6)
IfTrueAction3=[!HideMeterGroup NetIcons][!SetVariable netStatus "Ethernet"][!ShowMeterGroup NetIconsEthernetLanOnly][!UpdateMeterGroup NetIcons][!UpdateMeterGroup NetIconUtils][!Redraw]
IfCondition4=((MeasureConnectedLan + MeasureConnectedWan) = 2) && (MeasureAdapterType = 71)
IfTrueAction4=[!HideMeterGroup NetIcons][!SetVariable netStatus "Wifi"][!ShowMeter MeterNetIconWifi][!UpdateMeterGroup NetIcons][!UpdateMeterGroup NetIconUtils][!Redraw]
IfCondition5=((MeasureConnectedLan + MeasureConnectedWan) = 2) && (MeasureAdapterType = 6)
IfTrueAction5=[!HideMeterGroup NetIcons][!SetVariable netStatus "Ethernet"][!ShowMeter MeterNetIconEthernet][!UpdateMeterGroup NetIcons][!UpdateMeterGroup NetIconUtils][!Redraw]
IfConditionMode=1
UpdateDivider=-1

[MeasureExternalIpString]
Measure=String
String=#externalIp#
Substitute="":"fetching..."
DynamicVariables=1
IfCondition=#censorExternalIp# = 1
IfTrueAction=[!SetOption MeasureExternalIpString String "CENSORED"][!UpdateMeasure MeasureExternalIpString][!UpdateMeter MeterExternalIpValueString_][!Redraw]
IfFalseAction=[!SetOption MeasureExternalIpString String "#externalIp#"][!UpdateMeasure MeasureExternalIpString][!UpdateMeter MeterExternalIpValueString_][!Redraw]
IfMatch=fetching...
IfMatchAction=[!EnableMeasure MeasureExternalIp]

[MeasureNetSessionTotalRefreshButton]
Measure=String
String=#monitoringType#
IfMatch=standard
IfMatchAction=[!Log "Resetting network statistics std" Notice][!UpdateMeasureGroup NetInOutBytesSessionTotalBase][!SetOption MeterNetSessionTotalRefreshButton_ ImageName "#imgPath#refresh-up.png"][!SetOption MeterNetSessionTotalRefreshButton_ ImageTint "#colorAccent#"][!UpdateMeter MeterNetSessionTotalRefreshButton_][!Redraw][!DisableMeasure #CURRENTSECTION#]
IfNotMatchAction=[!Log "Resetting network statistics  nm" Notice][!CommandMeasure MeasureRunResetSessionStats "Run"][!SetOption MeterNetSessionTotalRefreshButton_ ImageName "#imgPath#refresh-up.png"][!SetOption MeterNetSessionTotalRefreshButton_ ImageTint "#colorAccent#"][!UpdateMeter MeterNetSessionTotalRefreshButton_][!Redraw][!DisableMeasure #CURRENTSECTION#]
IfMatchMode=1
UpdateDivider=-1
Disabled=1

[MeasureNetTotalRefreshButton]
Measure=String
String=#monitoringType#
IfMatch=standard
IfMatchAction=[!Log "Resetting network statistics std" Notice][!ResetStats][!UpdateMeasureGroup NetInOut][!UpdateMeasureGroup NetInOutBytesSessionTotalBase][!SetOption MeterNetTotalRefreshButton_ ImageName "#imgPath#refresh-up.png"][!SetOption MeterNetTotalRefreshButton_ ImageTint "#colorAccent#"][!UpdateMeter MeterNetTotalRefreshButton_][!Redraw]
IfNotMatchAction=[!Log "Resetting all network statistics nm" Notice][!CommandMeasure MeasureRunResetAllStats "Run"][!SetOption MeterNetTotalRefreshButton_ ImageName "#imgPath#refresh-up.png"][!SetOption MeterNetTotalRefreshButton_ ImageTint "#colorAccent#"][!UpdateMeter MeterNetTotalRefreshButton_][!Redraw]
IfMatchMode=1
UpdateDivider=-1
Disabled=1

; ==================================================
;  METERS
; ==================================================

[MeterBackground]
Meter=Shape
MeterStyle=StyleBackground

; ----- Gadget header -----

[MeterConfigButton_]
Meter=Image
MeterStyle=StyleConfigButton

[MeterSpeedtestButton_]
Meter=Image
ImageName=#imgPath#speedtest.png
X=-20r
Y=-3r
W=15
H=15
DynamicVariables=1
Hidden=1
Antialias=1
Group=SpeedtestButton | SpeedtestButton#showSpeedtestButton#
TransformationMatrix=#transformationMatrix#

[MeterNetIconEthernet]
Meter=Image
ImageName=#imgPath#network-wired.png
ImageTint=#colorAccent#
X=(#contentMargin# + 1)
Y=(#contentMargin# + 1)
H=11
Antialias=1
Group=NetIcons | NetIconsEthernetLanOnly
Hidden=1
TransformationMatrix=#transformationMatrix#

[MeterNetIconWifi]
Meter=Image
ImageName=#imgPath#wifi-[MeasureWifiIcon:].png
ImageTint=#colorAccent#
X=-1r
Y=-2r
W=15
H=15
DynamicVariables=1
AntiAlias=1
Group=NetIcons | NetIconsWifiLanOnly
Hidden=1
TransformationMatrix=#transformationMatrix#

[MeterNetIconDisconnected]
Meter=String
FontFace=ElegantIcons
FontSize=17
FontColor=230,0,0
FontWeight=900
X=(#contentMargin#)
Y=(#contentMargin#)
; SolidColor=255,255,255,50
Padding=-5,-5,-6,-6
Text=[\x004D]
Antialias=1
Group=NetIcons
Hidden=1
TransformationMatrix=#transformationMatrix#

[MeterNetIconLanOnly]
Meter=String
FontFace=ElegantIcons
FontSize=6
FontColor=#colorAccent#
FontWeight=900
X=([&MeterNetIcon[#netStatus]:XW] - [#CURRENTSECTION#:W])
Y=([&MeterNetIcon[#netStatus]:YH] - [#CURRENTSECTION#:H])
Padding=-1,-1,-1,0
SolidColor=#colorBg#
DynamicVariables=1
Text=[\x004D]
Group=NetIcons | NetIconsWifiLanOnly | NetIconsEthernetLanOnly
Antialias=1
Hidden=1
TransformationMatrix=#transformationMatrix#

[MeterGadgetTitle]
Meter=String
MeterStyle=StyleString | StyleStringGadgetHeader
X=([MeterNetIconEthernet:X] + [&MeterNetIcon[#netStatus]:W] + (([MeasureAdapterType:] <> 71) ? 3 : 2))
Text=Network Meter
Group=NetIconUtils
DynamicVariables=1

; ----- IPs -----

[InternalIpString]
Meter=String
MeterStyle=StyleString
MeasureName=MeasureInternalIp
Text=Int IP: %1

[ExternalIpLabelString]
Meter=String
MeterStyle=StyleString
Text=Ext IP: 

[MeterExternalIpValueString_]
Meter=String
MeterStyle=StyleString
MeasureName=MeasureExternalIpString
X=3R
Y=r
Group=ExternalIp
DynamicVariables=1
Text=%1

[MeterExternalIpRefreshButton_]
Meter=Image
ImageName=#imgPath#refresh-up.png
ImageTint=#colorAccent#
X=(#contentMarginRight# - 12)
Y=r
W=13
H=13
DynamicVariables=1
Antialias=1
Hidden=1
Group=ConfigButton
TransformationMatrix=#transformationMatrix#

[Placeholder]
Meter=String
MeterStyle=StyleString
FontColor=255,255,255,0
Y=r
Text=hi

[PingString]
Meter=String
MeterStyle=StyleString
MeasureName=MeasurePing
Y=((#showPing# = 0) ? (#rowSpacing# - 1) : #rowSpacing#)R
Text=Ping: %1 ms
DynamicVariables=1
Hidden=(#showPing# = 0) ? 1 : 0

; ----- Net In/Out -----

; Network Out
[MeterNetOutBitsCurrentArrow]
Meter=Image
ImageName=#imgPath#arrow-up.png
ImageTint=#colorUpload#
X=(#contentMargin# - 1)
Y=(#rowSpacing# + 2)R
W=12
DynamicVariables=1
TransformationMatrix=#transformationMatrix#

[MeterNetOutBitsCurrentString]
Meter=String
MeterStyle=StyleString
FontFace=#netInOutFontFace#
X=2R
Y=-2r
Text=#textNetOutBits#b/s
DynamicVariables=1
Group=NetInOut | NetInOutFontFace

[MeterNetOutBytesCurrentArrow]
Meter=Image
ImageName=#imgPath#arrow-up.png
ImageTint=#colorUpload#
X=#totalColumnX#
Y=2r
W=12
DynamicVariables=1
TransformationMatrix=#transformationMatrix#

[NetOutBytesCurrentString]
Meter=String
MeterStyle=StyleString
FontFace=#netInOutFontFace#
X=2R
Y=-2r
Text=#textNetOutBytes#B/s
DynamicVariables=1
Group=NetInOut | NetInOutFontFace

; Network In
[NetInBitsCurrentImage]
Meter=Image
ImageName=#imgPath#arrow-down.png
ImageTint=#colorDownload#
X=(#contentMargin# - 1)
Y=(#rowSpacing#)R
W=12
TransformationMatrix=#transformationMatrix#

[NetInBitsCurrentString]
Meter=String
MeterStyle=StyleString
FontFace=#netInOutFontFace#
X=2R
Y=r
Text=#textNetInBits#b/s
DynamicVariables=1
Group=NetInOut | NetInOutFontFace

[NetInBytesCurrentImage]
Meter=Image
ImageName=#imgPath#arrow-down.png
ImageTint=#colorDownload#
X=#totalColumnX#
Y=r
W=12
TransformationMatrix=#transformationMatrix#

[NetInBytesCurrentString]
Meter=String
MeterStyle=StyleString
FontFace=#netInOutFontFace#
X=2R
Y=r
Text=#textNetInBytes#B/s
DynamicVariables=1
Group=NetInOut | NetInOutFontFace

; ----- Network Peaks -----

[NetInOutPeakBitsIcon]
Meter=Image
MeterStyle=StylePeakIcon
X=(#contentMargin# - 1)
Y=((#showPeakNetworkUsage# = 1) ? #rowSpacing# : -#rowSpacing#)R
Group=NetPeaks
Hidden=(#showPeakNetworkUsage# = 0)
TransformationMatrix=#transformationMatrix#

[NetInOutPeakBitsString]
Meter=String
MeterStyle=StyleString
FontFace=#netInOutFontFace#
X=3R
Y=r
Text=#textNetInOutPeakBits#b/s
DynamicVariables=1
Group=NetPeaks | NetInOutFontFace
Hidden=(#showPeakNetworkUsage# = 0)

[NetInOutPeaktBytesIcon]
Meter=Image
MeterStyle=StylePeakIcon
X=(#columnX# - 2)
Y=r
Group=NetPeaks
Hidden=(#showPeakNetworkUsage# = 0)
TransformationMatrix=#transformationMatrix#

[NetInOutPeakBytesString]
Meter=String
MeterStyle=StyleString
FontFace=#netInOutFontFace#
X=3R
Y=r
Text=#textNetInOutPeakBytes#B/s
DynamicVariables=1
Group=NetPeaks | NetInOutFontFace
Hidden=(#showPeakNetworkUsage# = 0)

; ----- Network Totals -----

[NetInOutSessionTotalLabelString]
Meter=String
MeterStyle=StyleString
FontColor=#colorDim#,230
FontWeight=600
X=((#contentWIdth# / 4) - 15)
Y=((#showNetTotals# = 1) ? #rowSpacing# : -1)R
Text=Session
Group=NetTotals
Hidden=(#showNetTotals# = 0)

[MeterNetSessionTotalRefreshButton_]
Meter=Image
ImageName=#imgPath#refresh-up.png
ImageTint=#colorAccent#
X=3R
Y=r
W=13
H=13
DynamicVariables=1
Antialias=1
Hidden=1
Group=NetTotalsRefreshButtons | NetTotalsRefreshButtons#showNetTotals#
TransformationMatrix=#transformationMatrix#

[NetInOutTotalLabelString]
Meter=String
MeterStyle=StyleString
FontColor=#colorDim#,230
FontWeight=600
X=((#contentWIdth# / 4) * 3 - 3)
Y=r
Text=Total
Group=NetTotals
Hidden=(#showNetTotals# = 0)

[MeterNetTotalRefreshButton_]
Meter=Image
ImageName=#imgPath#refresh-up.png
ImageTint=#colorAccent#
;X=(#contentMarginRight# - 12)
X=3R
Y=r
W=13
H=13
DynamicVariables=1
Antialias=1
Hidden=1
Group=NetTotalsRefreshButtons | NetTotalsRefreshButtons#showNetTotals#
TransformationMatrix=#transformationMatrix#

[NetInOutPlaceholderString]
Meter=String
MeterStyle=StyleString
Y=r
FontColor=0,0,0,0
Text=foo
Group=NetTotals
Hidden=(#showNetTotals# = 0)

[NetOutBytesSessionTotalImage]
Meter=Image
ImageName=#imgPath#arrow-up.png
ImageTint=#colorUpload#
X=(#contentMargin# - 1)
Y=(#rowSpacing# + 2)R
W=12
Group=NetTotals
Hidden=(#showNetTotals# = 0)
TransformationMatrix=#transformationMatrix#

[NetOutBytesSessionTotalString]
Meter=String
MeterStyle=StyleString
FontFace=#netInOutFontFace#
X=2R
Y=-2r
Text=#textNetOutSessionTotal#B
DynamicVariables=1
Group=NetTotals
Hidden=(#showNetTotals# = 0)

[NetOutBytesTotalImage]
Meter=Image
ImageName=#imgPath#arrow-up.png
ImageTint=#colorUpload#
X=(#totalColumnX#)
Y=2r
W=12
DynamicVariables=1
Group=NetTotals
Hidden=(#showNetTotals# = 0)
TransformationMatrix=#transformationMatrix#

[NetOutBytesTotalString]
Meter=String
MeterStyle=StyleString
FontFace=#netInOutFontFace#
X=2R
Y=-2r
Text=#textNetOutTotal#B
DynamicVariables=1
Group=NetTotals
Hidden=(#showNetTotals# = 0)

[NetInBytesSessionTotalImage]
Meter=Image
ImageName=#imgPath#arrow-down.png
ImageTint=#colorDownload#
X=(#contentMargin# - 1)
Y=(#rowSpacing#)R
W=12
Group=NetTotals
Hidden=(#showNetTotals# = 0)
TransformationMatrix=#transformationMatrix#

[NetInBytesSessionTotalString]
Meter=String
MeterStyle=StyleString
FontFace=#netInOutFontFace#
X=2R
Y=r
Text=#textNetInSessionTotal#B
DynamicVariables=1
Group=NetTotals
Hidden=(#showNetTotals# = 0)

[NetInBytesTotalImage]
Meter=Image
ImageName=#imgPath#arrow-down.png
ImageTint=#colorDownload#
X=(#totalColumnX#)
Y=r
W=12
Group=NetTotals
Hidden=(#showNetTotals# = 0)
TransformationMatrix=#transformationMatrix#

[NetInBytesTotalString]
Meter=String
MeterStyle=StyleString
FontFace=#netInOutFontFace#
X=2R
Y=r
Text=#textNetInTotal#B
DynamicVariables=1
Group=NetTotals
Hidden=(#showNetTotals# = 0)

; ----- Graph -----

[LineGraphBackground]
Meter=Shape
MeterStyle=StyleLineGraphBackground
Y=((#showLineGraph# = 1) ? #rowSpacing# : -2)R

[LineGraph]
Meter=Line
MeterStyle=StyleLineGraph
AutoScale=1
LineCount=2
MeasureName=MeasureNetInBytes
MeasureName2=MeasureNetOutBytes
LineColor=#colorDownload#
LineColor2=#colorUpload#

[MeterLineGraphBackgroundOverlay]
Meter=Shape
MeterStyle=StyleLineGraphBackgroundOverlay
Shape3=Combine Shape | XOR Shape2
Y=-1r
DynamicVariables=1

; [LineGraphBgAdjustor]
; Meter=Image
; MeterStyle=StyleLineGraphBgAdjustor

[MeterBackgroundHeight]
Meter=Image
MeterStyle=StyleBackgroundHeight

; ----- Mouse Regions -----

[MeterNetIconRegion]
Meter=Image
SolidColor=255,255,255,0
X=([&MeterNetIcon[#netStatus]:X] * #scale# + #scale#)
Y=([&MeterNetIcon[#netStatus]:Y] * #scale# + #scale#)
W=([&MeterNetIcon[#netStatus]:W] * #scale#)
H=([&MeterNetIcon[#netStatus]:H] * #scale#)
DynamicVariables=1
ToolTipIcon=[#netIconTooltipIcon_[#netStatus]_[&MeasureConnectedWan:]]
ToolTipTitle=[MeasureInterfaceName]
ToolTipText=[#netIconTooltipText_[#netStatus]_[&MeasureConnectedWan:]]
Group=NetIconUtils

; [MeterNetworkStatusImage]
; Meter=Image
; MeterStyle=StyleMouseRegion
; ToolTipTitle=[MeasureInterfaceName]
; ToolTipIcon=Info
; ToolTipText=[MeasureAdapterName]
; DynamicVariables=1

[MeterSpeedtestButton]
Meter=Image
MeterStyle=StyleMouseRegion | StyleMouseRegionImgButtonHover
LeftMouseUpAction=["https://speedtest.net"]
ToolTipText=Visit speedtest.net
Group=SpeedtestButton1 | SpeedtestButton
Hidden=1

[MeterConfigButton]
Meter=Image
MeterStyle=StyleMouseRegion | StyleMouseRegionImgButtonHover
LeftMouseUpAction=[!SkinCustomMenu]
Group=ConfigButton
Hidden=1

[MeterExternalIpValueString]
Meter=Image
MeterStyle=StyleMouseRegion | StyleMouseRegionStringButtonHover
LeftMouseUpAction=["http://whatismyipaddress.com/ip/#externalIp#"]
ToolTipText=View your location based on your IP address

[MeterExternalIpRefreshButton]
Meter=Image
MeterStyle=StyleMouseRegion | StyleMouseRegionRefreshButton
LeftMouseUpAction=[!Log "Refreshing external IP address" Notice][!EnableMeasure MeasureExternalIp][!CommandMeasure MeasureExternalIp "Reset"][!CommandMeasure MeasureExternalIp "Update"][!SetOption #CURRENTSECTION#_ ImageName "#imgPath#refresh-up.png"][!SetOption #CURRENTSECTION#_ ImageTint "#colorAccent#"][!UpdateMeter #CURRENTSECTION#_][!Redraw]
ToolTipText=Refresh external IP
Group=ConfigButton
Hidden=1

[MeterNetSessionTotalRefreshButton]
Meter=Image
MeterStyle=StyleMouseRegion | StyleMouseRegionRefreshButton
LeftMouseUpAction=[!EnableMeasure MeasureNetSessionTotalRefreshButton][!UpdateMeasure MeasureNetSessionTotalRefreshButton]
ToolTipText=Reset session statistics
Group=ConfigButton
Hidden=1

[MeterNetTotalRefreshButton]
Meter=Image
MeterStyle=StyleMouseRegion | StyleMouseRegionRefreshButton
LeftMouseUpAction=[!EnableMeasure MeasureNetTotalRefreshButton][!UpdateMeasure MeasureNetTotalRefreshButton]
ToolTipText=Reset all network statistics
Group=ConfigButton
Hidden=1

; [ConvertedShape]
; Meter=Shape
; X=#contentMargin#
; Y=#contentMargin#
; Shape = Path Path1 | StrokeWidth 0 | Fill Color #colorAccent#
; Shape2 = Path Path2 | StrokeWidth 0
; Shape3 = Path Path3 | StrokeWidth 0
; Shape4 = Path Path4 | StrokeWidth 0
; Shape5 = Combine Shape1 | XOR Shape2 | XOR Shape3 | XOR Shape4 | Scale 0.025,0.025,0,0 | Offset 60,-70 | TransformOrder Offset,Scale
; Path1 = 216, 288 | LineTo 168, 288 | CurveTo 152, 304, 159.16, 288, 152, 295.16 | LineTo 152, 496 | CurveTo 168, 512, 152, 504.84, 159.16, 512 | LineTo 216, 512 | CurveTo 232, 496, 224.84, 512, 232, 504.84 | LineTo 232, 304 | CurveTo 216, 288, 232, 295.16, 224.84, 288 | ClosePath 1
; Path2 = 88, 384 | LineTo 40, 384 | CurveTo 24, 400, 31.16, 384, 24, 391.16 | LineTo 24, 496 | CurveTo 40, 512, 24, 504.84, 31.16, 512 | LineTo 88, 512 | CurveTo 104, 496, 96.84, 512, 104, 504.84 | LineTo 104, 400 | CurveTo 88, 384, 104, 391.16, 96.84, 384 | ClosePath 1
; Path3 = 344, 192 | LineTo 296, 192 | CurveTo 280, 208, 287.16, 192, 280, 199.16 | LineTo 280, 496 | CurveTo 296, 512, 280, 504.84, 287.16, 512 | LineTo 344, 512 | CurveTo 360, 496, 352.84, 512, 360, 504.84 | LineTo 360, 208 | CurveTo 344, 192, 360, 199.16, 352.84, 192 | ClosePath 1
; Path4 = 472, 96 | LineTo 424, 96 | CurveTo 408, 112, 415.16, 96, 408, 103.16 | LineTo 408, 496 | CurveTo 424, 512, 408, 504.84, 415.16, 512 | LineTo 472, 512 | CurveTo 488, 496, 480.84, 512, 488, 504.84 | LineTo 488, 112 | CurveTo 472, 96, 488, 103.16, 480.84, 96 | ClosePath 1
; TransformationMatrix=#transformationMatrix#

; [MeterWifiShape]
; Meter=Shape
; Shape=Path Path1 | StrokeWidth 2 | Fill Color 0,0,0,0 | Stroke Color #colorAccent#
; Path1=634.91,154.88 | CurveTo 5.09,154.88,457.74,-8.99,182.19,-8.93 | CurveTo 4.74,154.88,-1.5700000000000003,-8.99,-1.7000000000000002,-8.93 | ClosePath 0

; 0: Object {code: "M", command: "moveto", x: 634.91, y: 154.88}
; 1: Object {code: "C", command: "curveto", x: 5.09, x1: 457.74, x2: 182.19, y: 154.88, y1: -8.99, y2: -8.93}
; 2: Object {code: "C", command: "curveto", x: 4.74, x1: -1.5700000000000003, x2: -1.7000000000000002, …}
; 3: Object {code: "L", command: "lineto", x: 38.980000000000004, y: 211.82999999999998}
; 4: Object {code: "C", command: "curveto", x: 61.38, x1: 45.120000000000005, x2: 55, y: 212.20999999999998, …}
; 5: Object {code: "C", command: "curveto", x: 578.63, x1: 207.29999999999998, x2: 432.68, y: 212.20999999999998, …}
; 6: Object {code: "C", command: "curveto", x: 601.03, x1: 585.01, x2: 594.89, y: 211.82999999999998, …}
; 7: Object {code: "L", command: "lineto", x: 635.27, y: 177.85999999999999}
; 8: Object {code: "C", command: "curveto", x: 634.91, x1: 641.6999999999999, x2: 641.5699999999999, y: 154.88, …}
; 9: Object {code: "Z", command: "closepath"}
; 10: Object {code: "M", command: "moveto", x: 320, y: 352}
; 11: Object {code: "C", command: "curveto", x: 256, x1: 284.65, x2: 256, y: 416, y1: 352, y2: 380.65}
; 12: Object {code: "S", command: "smooth curveto", x: 320, x2: 284.65, y: 480, y2: 480}
; 13: Object {code: "S", command: "smooth curveto", x: 384, x2: 384, y: 416, y2: 451.35}
; 14: Object {code: "S", command: "smooth curveto", x: 320, x2: 355.35, y: 352, y2: 352}
; 15: Object {code: "Z", command: "closepath"}
; 16: Object {code: "M", command: "moveto", x: 522.67, y: 268.40999999999997}
; 17: Object {code: "C", command: "curveto", x: 117.32999999999998, x1: 407.40999999999997, x2: 232.45999999999998, …}
; 18: Object {code: "C", command: "curveto", x: 116.75999999999999, x1: 110.42999999999998, x2: 110.20999999999998, …}
; 19: Object {code: "L", command: "lineto", x: 151.2, y: 325.54999999999995}
; 20: Object {code: "C", command: "curveto", x: 173.25, x1: 157.2, x2: 166.85999999999999, y: 326.34999999999997, …}
; 21: Object {code: "C", command: "curveto", x: 466.74, x1: 257.2, x2: 382.99, y: 326.34999999999997, …}
; 22: Object {code: "C", command: "curveto", x: 488.79, x1: 473.13, x2: 482.79, y: 325.54999999999995, …}
; 23: Object {code: "L", command: "lineto", x: 523.23, y: 291.55999999999995}
; 24: Object {code: "C", command: "curveto", x: 522.6700000000001, x1: 529.79, x2: 529.5600000000001, …}
; 25: Object {code: "Z", command: "closepath"}